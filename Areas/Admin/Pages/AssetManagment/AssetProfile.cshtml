@page
@model AssetProject.Areas.Admin.Pages.AssetManagment.AssetProfileModel
@{
  
}

<div class="slim-mainpanel">
    <div class="container">
        <div class="slim-pageheader">
            <ol class="breadcrumb slim-breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Pages</a></li>
                <li class="breadcrumb-item active" aria-current="page">Asset Information</li>
            </ol>
            <h6 class="slim-pagetitle">Asset Information</h6>
        </div><!-- slim-pageheader -->

        <div class="row row-sm">
            <div class="col-lg-12">
                <div class="card card-profile">
                    <div class="card-body">
                        <div class="media">
                            <img src="@Model.AssetPhoto" alt="">
                            <div class="media-body">
                                  <div class="card-profile-name" style="font-size:x-large;display:inline-block">Asset Description</div>
                                <div style="display:inline-block; position: absolute;top: 40px;right:20px;color:#10ea55">
                               
                              Status :@Model.Asset.AssetStatus.AssetStatusTitle
                                </div>
                               
                                <p class="card-profile-position">Asset Tag Id <a href="">@Model.Asset.AssetTagId</a></p>
                                <p>Serial <a href="">@Model.Asset.AssetSerialNo</a></p>
                                <div class="row mg-t-20">
                                    <div class="col-md">
                                        <label class="section-label-sm tx-gray-500">General Information</label>
                                           <p class="invoice-info-row">
                                            <span>Asset Description</span>
                                            <span>@Model.Asset.AssetDescription</span>
                                        </p>
                                           <p class="invoice-info-row">
                                            <span>Asset Cost</span>
                                            <span>@Model.Asset.AssetCost</span>
                                        </p>
                                          <p class="invoice-info-row">
                                            <span>Asset Item</span>
                                            <span>@Model.Asset.Item.ItemTitle</span>
                                        </p>
                                          <p class="invoice-info-row">
                                            <span>Asset Purchase Date</span>
                                            <span>@Model.Asset.AssetPurchaseDate</span>
                                        </p>
                                    </div><!-- col -->
                                    @if (Model.Asset.DepreciableAsset)
                                    {
                                           <div class="col-md">
                                        <label class="section-label-sm tx-gray-500">Depreciation Information</label>
                                        <p class="invoice-info-row">
                                            <span>Depreciable Cost</span>
                                            <span>@Model.Asset.DepreciableCost</span>
                                        </p>
                                        <p class="invoice-info-row">
                                            <span>Salvage Value</span>
                                            <span>@Model.Asset.SalvageValue</span>
                                        </p>
                                        <p class="invoice-info-row">
                                            <span>Asset Life</span>
                                            <span>@Model.Asset.AssetLife</span>
                                        </p>
                                        <p class="invoice-info-row">
                                            <span>Date Acquired</span>
                                            <span>@Model.Asset.DateAcquired</span>
                                        </p>

                                        <p class="invoice-info-row">
                                            <span>Depreciation Method</span>
                                            <span>@Model.Asset.DepreciationMethod.DepreciationMethodTitle</span>
                                        </p>
                                    </div><!-- col -->
                                    }
                                 
                                </div>
                            </div><!-- media-body -->
                        </div><!-- media -->
                    </div><!-- card-body -->
                    <div class="card-footer">
              
     <a href="javascript:void(0)" onclick="editButtonClick(@Model.Asset.AssetId)">Edit Information</a> 
   <div class="dropdown show">
  <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
   More Actions
  </a>

  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        @if (Model.Asset.AssetStatusId == 1)
    {
        <a class="dropdown-item" href="javascript:void(0)" onclick="AssetCheckOutPopUp(@Model.Asset.AssetId)">Check Out</a>
    }
       @if (Model.Asset.AssetStatusId == 2)
      {
    <a class="dropdown-item" href="javascript:void(0)" onclick="AssetCheckInPopUp(@Model.Asset.AssetId)">Check In</a>
      }
                   
       <a class="dropdown-item" href="javascript:void(0)" onclick=" AssetRepairPopUp(@Model.Asset.AssetId)">Repair Asset</a> 
      <a class="dropdown-item" href="javascript:void(0)" onclick="ShowAssetLostPopUp()">Link Asset Lost  </a>
     <a class="dropdown-item" href="javascript:void(0)" onclick="ShowDisposeAssetPopUp()">Link Asset Dispose  </a>
     <a class="dropdown-item" href="javascript:void(0)" onclick="ShowAssetLeasingPopUp()">lease Asset </a>
     <a class="dropdown-item" href="javascript:void(0)" onclick="ShowAssetSellPopUp()">Asset Sell </a>
    <a class="dropdown-item" href="javascript:void(0)" onclick="ShowAssetBrokenPopup()">Link AssetBroken  </a> 
    <a asp-area="Admin" asp-page="/PrintAssetProfile/PrintAsset" asp-route-AssetId="@Model.Asset.AssetId">Print Asset</a>
  </div>
</div>
                </div><!-- card -->

                <div class="section-wrapper mg-t-20">
                    <label class="slim-card-title">LATEST ACTIVITY</label>
                    @*<p class="mg-b-20 mg-sm-b-40">Add a tab navigation in header of a card.</p>*@

                    <div class="row">
                        <div class="col-md">
                            <div class="card">
                                <div class="card-header">
                                    <ul class="nav nav-tabs card-header-tabs">
                                        <li class="nav-item">
                                            <a class="nav-link active" href="#Details" data-toggle="tab">Details</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Events" data-toggle="tab">Events</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Photos" data-toggle="tab">Photos</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Docs" data-toggle="tab">Docs</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Depreciation" data-toggle="tab">Depreciation</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Warranty" data-toggle="tab">Warranty</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Linking" data-toggle="tab">Linking</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Maint" data-toggle="tab">Maint</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Contracts" data-toggle="tab">Contracts</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#Insurances" data-toggle="tab">Insurances</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#History" data-toggle="tab">History</a>
                                        </li>

                                    </ul>
                                </div><!-- card-header -->
                                <div class="card-body">
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="Details">
                                            <partial name="_AssetDetailsTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                        <div class="tab-pane" id="Events">
                                            <partial name="_AssetEventTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                        <div class="tab-pane" id="Photos">
                                            <partial name="_AssetPhotosTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                        <div class="tab-pane" id="Docs">
                                            <partial name="_AssetDocsTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                         <div class="tab-pane" id="Depreciation">
                                            <partial name="_AssetDepreciationTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                         <div class="tab-pane" id="Warranty">
                                            <partial name="_AssetWarrantyTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                         <div class="tab-pane" id="Linking">
                                            <partial name="_AssetLinkingTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                           <div class="tab-pane" id="Maint">
                                            <partial name="_AssetMaintTab" model=Model.AssetMaintainance view-data="ViewData" />
                                        </div><!-- tab-pane -->
                                           <div class="tab-pane" id="Contracts">
                                            <partial name="_AssetContractTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                          <div class="tab-pane" id="Insurances">
                                            <partial name="_AssetInsuranceTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                             <div class="tab-pane" id="History">
                                            <partial name="_AssetHistoryTab" model=Model.Asset.AssetId />
                                        </div><!-- tab-pane -->
                                    </div><!-- tab-content -->
                                </div><!-- card-body -->
                            </div><!-- card -->
                        </div><!-- col -->

                    </div><!-- row -->
                </div>


            </div><!-- col-8 -->


        </div><!-- row -->

    </div><!-- container -->
</div>

<partial name="_AssetEditPopup" />
   @{ 
      ViewData["AssetId"] = Model.Asset.AssetId;
     <partial name="_AssetCHeckOut" model=@Model.AssetMovementModel view-data=" ViewData" />
  }
 <partial name="_AssetRepair" model=@Model.AssetrepairModel />
 <partial name="_AddAssetLostPopup" model=Model.Asset.AssetId />
 <partial name="_DisposeAssetPopup" model=Model.Asset.AssetId />
 <partial name="_AssetLeasingTab" model=Model.Asset.AssetId />
 <partial name="_AssetSellTab" model=Model.Asset.AssetId />
 <partial name="_AssetBroken" model=Model.Asset.AssetId />
 <partial name="_AssetCheckInPopUp" model=@Model.AssetMovementModel />

  </div><!-- card-footer -->
<script>
       function editButtonClick(AssetId) {
    $.ajax({
        type: "GET",
        url: "/admin/assetmanagment/Index?handler=SingleAssetForEdit",
        data: { "AssetId":AssetId },
        contentType: "application/json",
        dataType: "json",
        success: function (response) {
               $('#frmEdit').dxForm('instance').option('formData',response);
                document.getElementById("EditAssetDescriptiontxt").innerHTML = response.AssetDescription
                console.log(document.getElementById("EditAssetDescriptiontxt"))
               $('#AssetEditPoup').modal('show');
                
        },
        failure: function (response) {
            alert(response);
        }
    });
    }

     function ShowAddAssetPhotoPopUp(){
                     $('#AssetPhotoPoup').modal('show');
            }
function DeletePhoto(AssetId,AssetPhotoId)
 {
    $.ajax({
        type: "GET",
        url: "/admin/assetmanagment/AssetProfile?handler=DeletePhoto",
        data: { "AssetId": AssetId,"AssetPhotoId":AssetPhotoId },
        contentType: "application/json",
        dataType: "json",
        success: function (response) {
       document.location = '/Admin/AssetManagment/AssetProfile?AssetId='+response.AssetId;
       document.getElementById("Deletephotot").innerHTML = "Photo Deleted Successfully";
        },
        failure: function (response) {
            alert(response);
        }
    });


 }

 function ShowAssetcontractPopUp() {
        $('#AssetContractEditPoup').modal('show');
    }
    function ShowAssetInsurancePopUp() {
        $('#AssetInsuranceEditPoup').modal('show');
    }

    function ShowAssetDocumentPopup() {
        $('#AssetDocumentEditPoup').modal('show');
    }

    function AssetCheckOutPopUp(AssetId){
        console.log("check out")
        console.log(AssetId)
    $('#AssetCheckOutPoup').modal('show');
    console.log( document.getElementById("checkoutAssetIdField"))
     document.getElementById("checkoutAssetIdField").value =AssetId;
        console.log( document.getElementById("checkoutAssetIdField").value)
   
    }

    
    function AssetRepairPopUp(AssetId){
    $('#AssetRepairPoup').modal('show');
    console.log( document.getElementById("RepairAssetIdField"))
     document.getElementById("RepairAssetIdField").value =AssetId;
     console.log( document.getElementById("RepairAssetIdField").value)
   
    }

    function ShowAssetLostPopUp() {
        $('#AssetLostPoup').modal('show');
    }

    function ShowDisposeAssetPopUp() {
        $('#DisposeAssetPoup').modal('show');
    }

    function ShowAssetLeasingPopUp() {
        $('#AssetLeasingPoup').modal('show');
    }
    function ShowAssetSellPopUp() {
        $('#AssetSellPoup').modal('show');
    }

    function ShowAssetBrokenPopup() {
        $('#AssetBrokenPoup').modal('show');
    }

    function ShowAddAssetMiantainancePopUp(AssetId)
    {
        console.log(AssetId)
         $('#AssetMiantainancePoup').modal('show');
          console.log( document.getElementById("MaintainanceAssetIdField"))
     document.getElementById("MaintainanceAssetIdField").value =AssetId;
        console.log( document.getElementById("MaintainanceAssetIdField").value)
    }

    function AssetCheckInPopUp(AssetId)
    {
          console.log("check in")
         console.log(AssetId)
    $('#AssetCheckInPoup').modal('show');
    console.log( document.getElementById("checkInAssetIdField"))
     document.getElementById("checkInAssetIdField").value =AssetId;
        console.log( document.getElementById("checkInAssetIdField").value)
    }
</script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

}