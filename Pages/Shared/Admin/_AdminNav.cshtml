
@using AssetProject.Models;
@using Microsoft.EntityFrameworkCore;
@inject SignInManager<ApplicationUser> SignInManager
@inject AssetContext context;
@{
    var contractCount = context.Contracts.Where(c => c.EndDate.Date < DateTime.Now.Date).Count();
    var AssetsCheckOut = context.Assets.Include(i => i.AssetMovementDetails).ThenInclude(i => i.AssetMovement).Where(c => c.AssetStatus.AssetStatusId == 2 && c.AssetMovementDetails.OrderByDescending(e => e.AssetMovementDetailsId).FirstOrDefault().AssetMovement.DueDate< DateTime.Now).Count();
    var InsuranceCount = context.Insurances.Where(c => c.EndDate.Date < DateTime.Now.Date).Count();
    var LeasingCount = context.Assets.Include(i => i.AssetLeasingDetails).ThenInclude(i => i.AssetLeasing).Where(c => c.AssetStatus.AssetStatusId == 6 && c.AssetLeasingDetails.OrderByDescending(e => e.AssetLeasingDetailsId).FirstOrDefault().AssetLeasing.EndDate.Date< DateTime.Now.Date).Count();
    var WarrantyCount = context.AssetWarranties.Where(c => c.ExpirationDate.Date < DateTime.Now.Date).Count();
    var MaintenanceCount = context.AssetMaintainances.Where(c => c.ScheduleDate.Date == DateTime.Now.Date && c.MaintainanceStatus.MaintainanceStatusId == 1).Count();
    var MaintenanceoverdueCount = context.AssetMaintainances.Where(c => c.ScheduleDate.Date < DateTime.Now.Date && c.MaintainanceStatus.MaintainanceStatusId == 1).Count();

}
<div class="slim-navbar">
    <div class="container">
        <ul class="nav">
            <li class="nav-item with-sub active">
                <a class="nav-link" href="#">
                    <i class="icon ion-ios-home-outline"></i>
                    <span>Dashboard</span>
                </a>
                <div class="sub-item">
                    <ul>
                        <li><a asp-area="Admin" asp-page="/Dashboards/DashboardSummary">Dashboard - Summary</a></li>
                        <li><a asp-area="Admin" asp-page="/Dashboards/DashboardGeo">Dashboard - Geo</a></li>
                        @*  <li><a href="index3.html">Dashboard 03</a></li>
                            <li><a href="index4.html">Dashboard 04</a></li>
                            <li><a href="index5.html">Dashboard 05</a></li>*@
                    </ul>
                </div><!-- sub-item -->
            </li>
            <li class="nav-item with-sub mega-dropdown">
                <a class="nav-link" href="#">
                    <i class="icon ion-ios-filing-outline"></i>
                    <span>Assets</span>
                </a>

                <div class="sub-item">
                    <div class="row">
                        <div class="col-lg-5">
                            <label class="section-label">Assets Management</label>
                            <div class="row">
                                <div class="col">
                                    <ul>
                                        <li><a asp-area="Admin" asp-page="/AssetManagment/Index"> Asset List</a></li>
                                        <li><a asp-area="Admin" asp-page="/AssetManagment/AddAsset">Add New Asset</a></li>
                                        <li><a asp-area="Admin" asp-page="/AssetManagment/GetAssetRepair">Repaired Assets</a></li>
                                        <li><a asp-area="Admin" asp-page="/AssetLostManagement/AddLostList">Asset Lost</a></li>
                                        <li><a asp-area="Admin" asp-page="/Dispose Asset Managment/DisposeAssetList">Dispose Asset</a></li>
                                        <li><a asp-area="Admin" asp-page="/AssetLeasingManagement/leasinglist">Leasing List</a></li>
                                        <li><a asp-area="Admin" asp-page="/SellAssetManagement/SellAssetList">Sell Asset List</a></li>
                                        <li><a asp-area="Admin" asp-page="/AssetBrokenManagement/AssetBrokenList">Asset Broken List</a></li>
                                        <li><a asp-area="Admin" asp-page="/PatchProcess/PatchCheckIn">Patch CheckIn</a></li>
                                        <li><a asp-area="Admin" asp-page="/PatchProcess/PatchCheckOut">Patch CheckOut</a></li>
                                        <li><a asp-area="Admin" asp-page="/PatchProcess/PatchLease">Patch Lease</a></li>
                                        <li><a asp-area="Admin" asp-page="/PatchProcess/PatchMaint">PatchMaintainance</a></li>
                                        <li><a asp-area="Admin" asp-page="/PatchProcess/PatchTransferFromDepartment">Patch Transfer From Department</a></li>
                                        <li><a asp-area="Admin" asp-page="/PatchProcess/PatchTransferFromEmpolyee">Patch Transfer From Empolyee</a></li>
                                        <li><a asp-area="Admin" asp-page="/AssetManagment/SearchCheckedOutAssetsByDepartment">Search CheckedOut Assets By Department</a></li>
                                        <li><a asp-area="Admin" asp-page="/AssetManagment/SearchCheckedOutAssetsByEmpolyee">Search CheckedOut Assets By Employee</a></li>
                                        <li><a asp-area="Admin" asp-page="/AssetManagment/SearchCheckedOutAssetsByLocation">Search CheckedOut Assets By Location</a></li>
                                        <li><a href="elem-buttons.html">Search Assets</a></li>
                                        <li><a href="elem-cards.html">Cards</a></li>
                                        <li><a href="elem-carousel.html">Carousel</a></li>
                                        <li><a href="elem-dropdowns.html">Dropdown</a></li>
                                        <li><a href="elem-icons.html">Icons</a></li>
                                        <li><a href="elem-images.html">Images</a></li>
                                        <li><a href="elem-lists.html">Lists</a></li>
                                    </ul>
                                </div><!-- col -->
                                <div class="col-lg">
                                    <ul>

                                        <li><a href="elem-pagination.html">Pagination</a></li>
                                        <li><a href="elem-tooltip.html">Tooltip</a></li>
                                        <li><a href="elem-popover.html">Popover</a></li>
                                        <li><a href="elem-progress.html">Progress</a></li>
                                        <li><a href="elem-spinner.html">Spinner</a></li>
                                        <li><a href="elem-typography.html">Typography</a></li>
                                    </ul>
                                </div><!-- col -->
                            </div><!-- row -->
                        </div><!-- col -->
                        <div class="col-lg mg-t-30 mg-lg-t-0">
                            <label class="section-label">Contracting</label>
                            <ul>
                                <li><a asp-area="Admin" asp-page="/ContractManagment/ContractList">Contract Managment</a></li>
                                <li><a asp-area="Admin" asp-page="/insuranceManagement/insuranceList">Insurance Managment</a></li>
                                <li><a asp-area="Admin" asp-page="/VendorManagment/VendorList">Vendor Managment</a></li>
                                <li><a asp-area="Admin" asp-page="/CustomerManagement/CustomerList">Customer Management</a></li>
                                <li><a href="chart-echarts.html">ECharts</a></li>
                                <li><a href="chart-chartist.html">Chartist</a></li>
                                <li><a href="chart-rickshaw.html">Rickshaw</a></li>
                                <li><a href="chart-sparkline.html">Sparkline</a></li>
                                <li><a href="chart-peity.html">Peity</a></li>
                            </ul>
                        </div><!-- col -->
                        <div class="col-lg mg-t-30 mg-lg-t-0">
                            <label class="section-label">Maps</label>
                            <ul>
                                <li><a href="map-google.html">Google Maps</a></li>
                                <li><a href="map-leaflet.html">Leaflet Maps</a></li>
                                <li><a href="map-vector.html">Vector Maps</a></li>
                            </ul>

                            <label class="section-label mg-t-20">Tables</label>
                            <ul>
                                <li><a href="table-basic.html">Basic Table</a></li>
                                <li><a href="table-datatable.html">Data Table</a></li>
                            </ul>
                        </div><!-- col -->
                        <div class="col-lg mg-t-30 mg-lg-t-0">
                            <label class="section-label">Helper / Utilities</label>
                            <ul>
                                <li><a href="util-background.html">Background</a></li>
                                <li><a href="util-border.html">Border</a></li>
                                <li><a href="util-height.html">Height</a></li>
                                <li><a href="util-margin.html">Margin</a></li>
                                <li><a href="util-padding.html">Padding</a></li>
                                <li><a href="util-position.html">Position</a></li>
                                <li><a href="util-typography.html">Typography</a></li>
                                <li><a href="util-width.html">Width</a></li>
                            </ul>
                        </div><!-- col -->
                    </div><!-- row -->
                </div>
            </li>
            <li class="nav-item with-sub">
                <a class="nav-link" href="#">
                    <i class="icon ion-ios-book-outline"></i>
                    <span>Inventory</span>
                </a>
                <div class="sub-item">
                    <ul>
                        <li><a asp-area="Admin" asp-page="/ItemManagement/ItemList">Item Managment</a></li>
                        <li><a asp-area="Admin" asp-page="/StoreManagment/List">Store Managment</a></li>
                        <li><a href="page-invoice.html">Purchase List</a></li>
                        <li><a asp-area="Admin" asp-page="/PurchaseManagement/NewPurchase">New Purchase</a></li>
                        <li class="sub-with-sub">
                            <a href="#">Pricing</a>
                            <ul>
                                <li><a href="page-pricing.html">Pricing 01</a></li>
                                <li><a href="page-pricing2.html">Pricing 02</a></li>
                                <li><a href="page-pricing3.html">Pricing 03</a></li>
                            </ul>
                        </li>
                        <li class="sub-with-sub">
                            <a href="page-signin.html">Sign In</a>
                            <ul>
                                <li><a href="page-signin.html">Signin Simple</a></li>
                                <li><a href="page-signin2.html">Signin Split</a></li>
                            </ul>
                        </li>
                        <li class="sub-with-sub">
                            <a href="page-signup.html">Sign Up</a>
                            <ul>
                                <li><a href="page-signup.html">Signup Simple</a></li>
                                <li><a href="page-signup2.html">Signup Split</a></li>
                            </ul>
                        </li>
                        <li class="sub-with-sub">
                            <a href="#">Error Pages</a>
                            <ul>
                                <li><a href="page-404.html">404 Not Found</a></li>
                                <li><a href="page-505.html">505 Forbidden</a></li>
                                <li><a href="page-500.html">500 Internal Server</a></li>
                                <li><a href="page-503.html">503 Service Unavailable</a></li>
                            </ul>
                        </li>
                    </ul>
                </div><!-- dropdown-menu -->
            </li>
            <li class="nav-item with-sub">
                <a class="nav-link" href="#" data-toggle="dropdown">
                    <i class="icon ion-ios-gear-outline"></i>
                    <span>Reports</span>
                </a>
                <div class="sub-item">
                    <ul>
                        <li class="sub-with-sub">
                            <a href="#">Store Reports</a>
                            <ul>

                                <li><a asp-area="Admin" asp-page="/ReportsManagement/StockTaken">Store Taken Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/StoreIncoming">Store Incoming Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/StoreOutcoming">Store Outcoming Report</a></li>
                            </ul>
                        </li>
                        <li><a asp-area="Admin" asp-page="/ReportsManagement/InsuranceReport">Insurances Policy Report</a></li>
                        <li><a asp-area="Admin" asp-page="/ReportsManagement/ContractReport">Contracts Report</a></li>
                        <li><a asp-area="Admin" asp-page="/ReportsManagement/LeasingReport">Leased Asset Report</a></li>
                        <li><a asp-area="Admin" asp-page="/ReportsManagement/assetreport">Asset Report</a></li>
                        <li><a asp-area="Admin" asp-page="/ReportsManagement/AssetStatusReport">Status Report</a></li>


                        <li class="sub-with-sub">
                            <a href="#">Transaction Reports</a>
                            <ul>

                                <li><a asp-area="Admin" asp-page="/ReportsManagement/PrintAssetCheckOut">CheckOut Assets Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/AssetCheckIn">CheckIn Assets Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/AddAssetRPT">Added Assets Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/AssetEditedReport">Editd Assets Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/BrockenReport">Brocken Asset Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/AssetRepairRPT">Assets Repair Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/AssetLostReport">Assets Lost Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/SellAssetReport">Assets Sell Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/DisposeAssetReport">Assets Dispose Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/LeasingReport">Leased Out Asset Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/Transactions HistoryRPT">Transactions History Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/MaintainanceReport">Maintenance Reports</a></li>


                            </ul>
                        </li>
                        <li class="sub-with-sub">
                            <a href="#">Other Reports</a>
                            <ul>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/DepartmentRPT">Departments Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/EmployeeReport">Employees Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/CustomerReport">Customers Report</a></li>
                                <li><a asp-area="Admin" asp-page="/ReportsManagement/PrintCategory">Category Report</a></li>
                                @*<li><a asp-area="Admin" asp-page="/ReportsManagement/LocationReport">Location Report</a></li>*@

                            </ul>
                        </li>

                    </ul>

                </div><!-- dropdown-menu -->
            </li>
            <li class="nav-item  with-sub">
                <a class="nav-link" href="page-messages.html">
                    <i class="icon ion-ios-chatboxes-outline"></i>
                    <span>Alerts</span>
                    <span class="square-8"></span>
                </a>
                <div class="sub-item">
                    <ul>
                        <li><a asp-area="Admin" asp-page="/AlertsManagement/CheckOutExpiring">Assets Past Due<span class="AlertMenuItem">@AssetsCheckOut</span></a></li>
                        <li><a asp-area="Admin" asp-page="/AlertsManagement/ContractsExpiring">Contracts Expiring<span class="AlertMenuItem">@contractCount</span></a></li>
                        <li><a asp-area="Admin" asp-page="/AlertsManagement/InsurancesExpiring">Insurances Expiring<span class="AlertMenuItem">@InsuranceCount</span></a></li>
                        <li><a asp-area="Admin" asp-page="/AlertsManagement/LeasesExpiring">Leases Expiring<span class="AlertMenuItem">@LeasingCount</span></a></li>
                        <li><a asp-area="Admin" asp-page="/AlertsManagement/MaintenanceDue">Maintenance Due<span class="AlertMenuItem">@MaintenanceCount</span></a></li>
                        <li><a asp-area="Admin" asp-page="/AlertsManagement/MaintenanceOverdue">Maintenance Overdue<span class="AlertMenuItem">@MaintenanceoverdueCount</span></a></li>
                        <li><a asp-area="Admin" asp-page="/AlertsManagement/Warranties Expiring">Warranties Expiring<span class="AlertMenuItem">@WarrantyCount</span></a></li>
                    </ul>
                </div><!-- dropdown-menu -->
            </li>
            <li class="nav-item">
                <a class="nav-link" href="widgets.html">
                    <i class="icon ion-ios-analytics-outline"></i>
                    <span>Help & Contact</span>
                </a>
            </li>
            <li class="nav-item with-sub">
                <a class="nav-link" href="#" data-toggle="dropdown">
                    <i class="icon ion-ios-gear-outline"></i>
                    <span>Setup</span>
                </a>
                <div class="sub-item">
                    <ul>

                        @if (SignInManager.IsSignedIn(User) && User.IsInRole("Company"))
                        {
                            <li><a asp-area="Admin" asp-page="/SetUp/EditCompanyInformation">Edit Company Information</a></li>
                            <li><a asp-area="Admin" asp-page="/UserManagment/AddUser"> Add New User</a></li>
                            <li> <a asp-area="Admin" asp-page="/UserManagment/UserList"> User List</a></li>
                        }
                        <li><a asp-area="Admin" asp-page="/SetUp/CategoryList">Category List</a></li>
                        <li><a asp-area="Admin" asp-page="/SetUp/DepartmentList">Department List</a></li>
                        <li><a asp-area="Admin" asp-page="/SetUp/LocationTree">LocationTree</a></li>
                        <li><a asp-area="Admin" asp-page="/BrandManagment/BrandList">Brand Managment</a></li>
                        <li><a asp-area="Admin" asp-page="/TypeManagment/TypeList">Type Managment</a></li>

                        <li><a asp-area="Admin" asp-page="/employeeManagement/employeeList">Empolyee Managment</a></li>



                    </ul>
                </div><!-- dropdown-menu -->
            </li>
        </ul>
    </div><!-- container -->
</div><!-- slim-navbar -->